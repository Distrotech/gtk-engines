AC_INIT(README)
# Save this value here, since automake will set cflags later
cflags_set=${CFLAGS+set}

AM_INIT_AUTOMAKE(gtk-engines, 2.2.0)

dnl Initialize maintainer mode
AM_MAINTAINER_MODE

ACLOCAL="$ACLOCAL $ACLOCAL_FLAGS"

AC_PROG_CC
AM_PROG_CC_STDC
AC_PROG_INSTALL
AC_PROG_MAKE_SET

changequote(,)dnl
if test "x$GCC" = "xyes"; then
  case " $CFLAGS " in
  *[\ \	]-Wall[\ \	]*) ;;
  *) CFLAGS="$CFLAGS -Wall" ;;
  esac
fi
changequote([,])dnl

dnl Initialize libtool
AM_DISABLE_STATIC
AM_PROG_LIBTOOL

PKG_CHECK_MODULES(GTK, gtk+-2.0 >= 1.3.12,,
                  AC_MSG_ERROR([GTK+-2.0 is required to compile gtk-engines]))

GTK_VERSION=`$PKG_CONFIG --variable=gtk_binary_version gtk+-2.0`
AC_SUBST(GTK_CFLAGS)
AC_SUBST(GTK_LIBS)
AC_SUBST(GTK_VERSION)

# Save ACLOCAL_FLAGS
ACLOCAL="$ACLOCAL $ACLOCAL_FLAGS"

AC_OUTPUT([
gtk-engines.spec
Makefile
metal/Makefile
metal/Theme/Makefile
metal/Theme/gtk-2.0/Makefile
pixbuf/Makefile
redmond95/Makefile
redmond95/Theme/Makefile
redmond95/Theme/gtk-2.0/Makefile
gtk-engines-2.pc
])
