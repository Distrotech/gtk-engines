%define  ver     @VERSION@
%define  RELEASE 1
%define  rel     %{?CUSTOM_RELEASE} %{!?CUSTOM_RELEASE:%RELEASE}
%define  prefix  /usr

Summary: Default GTK+ theme engines
Name: gtk-engines
Version: %ver
Release: %rel
Copyright: GPL
Group: X11/Libraries
Source: ftp://ftp.gnome.org/pub/GNOME/source/gtk-engines/gtk-engines-%{PACKAGE_VERSION}.tar.gz
URL: http://gtk.themes.org/
BuildRoot:/var/tmp/gtk-engines-%{PACKAGE_VERSION}-root
Docdir: %{prefix}/doc

%description
These are the graphical engines for the various GTK+ toolkit themes.
Included themes are:

  - Notif
  - redmond95
  - Pixmap
  - Metal (Java swing-like)

%prep
%setup 

%build
# Needed for snapshot releases.
if [ ! -f configure ]; then
 CFLAGS="$RPM_OPT_FLAGS" ./autogen.sh --prefix=%prefix
else
 CFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%prefix
fi

if [ "$SMP" != "" ]; then
  make -j$SMP "MAKE=make -j$SMP"
else
  make
fi

%install

rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT

%makeinstall
# Clean out files that should not be part of the rpm.
# This is the recommended way of dealing with it for RH8
rm -f $RPM_BUILD_ROOT%{_libdir}/gtk-2.0/2.0.0/engines/*.la
rm -f $RPM_BUILD_ROOT%{_libdir}/gtk-2.0/2.0.0/engines/*.a
rm -f $RPM_BUILD_ROOT%{_libdir}/*.a
rm -f $RPM_BUILD_ROOT%{_libdir}/*.la

%clean
rm -rf $RPM_BUILD_ROOT

%changelog
* Thu Oct 22 2002 Christian F.K. Schaller <Uraeus@gnome.org>
- Update SPEC file to include latest stuff 
- work on RH8

* Fri Nov 20 1998 Michael Fulbright <drmike@redhat.com>

- First try at a spec file

%files
%defattr(-, root, root)
%doc COPYING README ChangeLog
%{_datadir}/themes/Metal/*
%{_datadir}/themes/Redmond95/*
%{_libdir}/gtk-2.0/2.0.0/engines/*.so
